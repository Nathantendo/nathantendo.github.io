<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platformer Game</title>
    <style>
        body { background-color: black; color: white; text-align: center; font-family: Arial, sans-serif; }
        canvas { background-color: lightblue; display: block; margin: auto; border: 2px solid white; }
    </style>
</head>
<body>
    <h1>Platformer Game</h1>
    <p>Use arrow keys to move, space to jump.</p>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <script>
        let canvas = document.getElementById("gameCanvas");
        let ctx = canvas.getContext("2d");

        let player = { x: 50, y: 300, width: 40, height: 40, speed: 5, dy: 0, gravity: 0.5, onGround: true };
        let keys = {};
        let score = 0;
        let enemies = [{ x: 300, y: 330, width: 40, height: 40 }];
        let powerUps = [{ x: 200, y: 320, type: "mushroom" }, { x: 500, y: 320, type: "star" }];
        let platforms = [{ x: 150, y: 300, width: 100, height: 10 }, { x: 400, y: 250, width: 150, height: 10 }];
        
        document.addEventListener("keydown", (event) => keys[event.key] = true);
        document.addEventListener("keyup", (event) => keys[event.key] = false);

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Movement logic
            if (keys["ArrowRight"]) player.x += player.speed;
            if (keys["ArrowLeft"]) player.x -= player.speed;
            if (keys[" "] && player.onGround) { player.dy = -10; player.onGround = false; }

            // Gravity
            player.dy += player.gravity;
            player.y += player.dy;
            if (player.y >= 300) { player.y = 300; player.onGround = true; }

            // Collision with platforms
            platforms.forEach(platform => {
                if (player.x + player.width > platform.x && player.x < platform.x + platform.width &&
                    player.y + player.height > platform.y && player.y < platform.y + platform.height) {
                    player.y = platform.y - player.height;
                    player.dy = 0;
                    player.onGround = true;
                }
            });

            // Collision with power-ups
            powerUps.forEach((powerUp, index) => {
                if (player.x < powerUp.x + 30 && player.x + player.width > powerUp.x && 
                    player.y < powerUp.y + 30 && player.y + player.height > powerUp.y) {
                    if (powerUp.type === "mushroom") { player.width += 10; player.height += 10; }
                    if (powerUp.type === "star") { score += 100; }
                    powerUps.splice(index, 1);
                }
            });

            // Collision with enemies
            enemies.forEach((enemy, index) => {
                if (player.x < enemy.x + enemy.width && player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height && player.y + player.height > enemy.y) {
                    if (player.dy > 0) { enemies.splice(index, 1); score += 50; } // Stomp enemy
                    else { score -= 100; player.x = 50; player.y = 300; } // Damage player
                }
            });

            // Draw Player
            ctx.fillStyle = "red";
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Draw Enemies
            ctx.fillStyle = "green";
            enemies.forEach(enemy => ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height));

            // Draw Power-ups
            powerUps.forEach(powerUp => {
                ctx.fillStyle = powerUp.type === "mushroom" ? "orange" : "yellow";
                ctx.fillRect(powerUp.x, powerUp.y, 30, 30);
            });

            // Draw Platforms
            ctx.fillStyle = "brown";
            platforms.forEach(platform => ctx.fillRect(platform.x, platform.y, platform.width, platform.height));

            // Display score
            ctx.fillStyle = "white";
            ctx.fillText("Score: " + score, 10, 20);

            requestAnimationFrame(gameLoop);
        }
        gameLoop();
    </script>
</body>
</html>
